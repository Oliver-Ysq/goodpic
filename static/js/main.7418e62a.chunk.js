(this["webpackJsonpreact-goodpic"]=this["webpackJsonpreact-goodpic"]||[]).push([[2],{124:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),i=t(12),c=t.n(i),u=(t(98),t(5));var o=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"Loading..."))},l=t(16),s=t(17),f=t(125),m=t(65),h=t(67),p=t(35);function d(){var e=Object(l.a)(["\n  margin-right: 10px;\n"]);return d=function(){return e},e}function g(){var e=Object(l.a)(["\n  margin-left: 20px;\n  text-align: center;\n  background: #288388;\n  border-color: #288388;\n  @media screen and (max-width: 500px) {\n    margin-left: 5px;\n  }\n"]);return g=function(){return e},e}function v(){var e=Object(l.a)(["\n  @media screen and (min-width: 500px) {\n    margin-left: auto;\n  }\n"]);return v=function(){return e},e}function b(){var e=Object(l.a)(["\n  color: #fff;\n  margin-left: 30px;\n  &.active {\n    border-bottom: 1px solid #fff;\n  }\n  @media screen and (max-width: 500px) {\n    margin-left: 12px;\n  }\n"]);return b=function(){return e},e}function y(){var e=Object(l.a)(["\n  height: 30px;\n  @media screen and (max-width: 500px) {\n    display: none;\n  }\n"]);return y=function(){return e},e}function w(){var e=Object(l.a)(["\n  background-color: #102a38;\n  padding: 10px 140px;\n  display: flex;\n  align-items: center;\n  color: #fff;\n  @media screen and (max-width: 500px) {\n    padding: 10px 10px;\n    justify-content: space-between;\n  }\n"]);return w=function(){return e},e}var j=s.a.header(w()),x=s.a.img(y()),O=Object(s.a)(p.b)(b()),E=s.a.div(v()),k=Object(s.a)(f.a)(g()),U=s.a.span(d()),P=Object(h.a)((function(){var e=Object(m.a)(),n=e.UserStore,t=e.AuthStore,a=Object(u.f)();return r.a.createElement(j,null,r.a.createElement(x,{src:"image.png"}),r.a.createElement("nav",null,r.a.createElement(O,{to:"/",activeClassName:"active",exact:!0},"\u9996\u9875"),r.a.createElement(O,{to:"/history",activeClassName:"active"},"\u56fe\u7247\u4ed3\u5e93"),r.a.createElement(O,{to:"/about",activeClassName:"active"},"\u5173\u4e8e\u6211")),r.a.createElement(E,null,n.currentUser?r.a.createElement(r.a.Fragment,null,r.a.createElement(U,null,n.currentUser.attributes.username),r.a.createElement(k,{type:"primary",onClick:function(){t.logout()}},"\u6ce8\u9500")):r.a.createElement(r.a.Fragment,null,r.a.createElement(k,{type:"primary",onClick:function(){console.log("\u8df3\u8f6c\u5230\u767b\u5f55\u9875\u9762"),a.push("/login")}},"\u767b\u5f55"),r.a.createElement(k,{type:"primary",onClick:function(){console.log("\u8df3\u8f6c\u9053\u6ce8\u518c\u9875\u9762"),a.push("/register")}},"\u6ce8\u518c"))))}));function F(){var e=Object(l.a)(["\n  padding: 10px 100px;\n  text-align: center;\n  font-size: 12px;\n  color: #aaa;\n"]);return F=function(){return e},e}var C=s.a.footer(F());var z=function(){return r.a.createElement(C,null,r.a.createElement("div",null,"Footer"))},I=Object(a.lazy)((function(){return Promise.all([t.e(0),t.e(6),t.e(9)]).then(t.bind(null,324))})),S=Object(a.lazy)((function(){return Promise.all([t.e(0),t.e(5),t.e(8)]).then(t.bind(null,325))})),L=Object(a.lazy)((function(){return t.e(7).then(t.bind(null,315))})),M=Object(a.lazy)((function(){return Promise.all([t.e(0),t.e(1),t.e(10)]).then(t.bind(null,316))})),A=Object(a.lazy)((function(){return Promise.all([t.e(0),t.e(1),t.e(11)]).then(t.bind(null,317))}));var D=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(P,null),r.a.createElement("main",null,r.a.createElement(a.Suspense,{fallback:r.a.createElement(o,null)},"   ",r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/",exact:!0,component:I}),r.a.createElement(u.a,{path:"/about",exact:!0,component:L}),r.a.createElement(u.a,{path:"/history",exact:!0,component:S}),r.a.createElement(u.a,{path:"/login",exact:!0,component:M}),r.a.createElement(u.a,{path:"/register",exact:!0,component:A})))),r.a.createElement(z,null))},B=function(e){e&&e instanceof Function&&t.e(12).then(t.bind(null,318)).then((function(n){var t=n.getCLS,a=n.getFID,r=n.getFCP,i=n.getLCP,c=n.getTTFB;t(e),a(e),r(e),i(e),c(e)}))};c.a.render(r.a.createElement(p.a,null," ",r.a.createElement(D,null)," "),document.getElementById("root")),B()},65:function(e,n,t){"use strict";t.d(n,"a",(function(){return x}));var a=t(0),r=t(24),i=t(25),c=t(2),u=t(14),o=t.n(u);o.a.init({appId:"r8HD9RIzlGPlMbICACP43g2h-gzGzoHsz",appKey:"1xP5D2JMXisB84jIKzSlX30c",serverURL:"https://r8hd9riz.lc-cn-n1-shared.com"});var l=function(e,n){var t=new u.User;return t.setUsername(e),t.setPassword(n),new Promise((function(e,n){t.signUp().then((function(n){e(n)}),(function(e){n(e)}))}))},s=function(e,n){return new Promise((function(t,a){u.User.logIn(e,n).then((function(e){t(e)}),(function(e){a(e)}))}))},f=function(){u.User.logOut()},m=function(){return u.User.current()},h=function(e,n){var t=new o.a.Object("Image"),a=new o.a.File(n,e);return t.set("filename",n),t.set("owner",o.a.User.current()),t.set("url",a),new Promise((function(e,n){t.save().then((function(n){e(n)})).catch((function(e){n(e)}))}))},p=function(e){console.log(e);var n=o.a.Object.createWithoutData("Image",e);return new Promise((function(e,t){n.destroy().then((function(n){return e(n)})).catch((function(e){return t(e)}))}))},d=function(e){var n=e.page,t=void 0===n?0:n,a=e.limit,r=void 0===a?5:a,i=new o.a.Query("Image");return i.include("owner"),i.limit(r),i.skip(t*r),i.descending("createAt"),i.equalTo("owner",o.a.User.current()),new Promise((function(e,n){i.find().then((function(n){return e(n)})).catch((function(e){return n(e)}))}))},g=new(function(){function e(){Object(r.a)(this,e),this.currentUser=null,Object(c.k)(this)}return Object(i.a)(e,[{key:"pullUser",value:function(){this.currentUser=m()}},{key:"resetUser",value:function(){this.currentUser=null}}]),e}()),v=t(127),b=new(function(){function e(){Object(r.a)(this,e),this.list=[],this.isLoading=!1,this.hasMore=!0,this.page=0,this.limit=5,Object(c.k)(this)}return Object(i.a)(e,[{key:"append",value:function(e){this.list=this.list.concat(e)}},{key:"addPage",value:function(){this.page++}},{key:"find",value:function(){var e=this;this.isLoading=!0,d({page:this.page,limit:this.limit}).then((function(n){console.log(n),e.append(n),n.length<e.limit&&(e.hasMore=!1)})).catch((function(e){v.b.warning("\u52a0\u8f7d\u5931\u8d25")})).finally((function(){e.isLoading=!1}))}},{key:"deleteItem",value:function(e){p(e).then((function(){v.b.success("\u5220\u9664\u6210\u529f")})).catch((function(){v.b.warning("\u5220\u9664\u5931\u8d25")})),this.list=this.list.filter((function(n){return n.id!==e}))}},{key:"reset",value:function(){this.list=[],this.isLoading=!1,this.hasMore=!0,this.page=0,this.limit=10}}]),e}()),y=new(function(){function e(){Object(r.a)(this,e),this.filename="",this.file=null,this.serverFile=null,this.isUploading=!1,Object(c.k)(this)}return Object(i.a)(e,[{key:"setFilename",value:function(e){this.filename=e}},{key:"setFile",value:function(e){this.file=e}},{key:"upload",value:function(){var e=this;return this.isUploading=!0,this.serverFile=null,new Promise((function(n,t){h(e.file,e.filename).then((function(t){e.serverFile=t,n(t)})).catch((function(e){v.b.warning("\u4e0a\u4f20\u5931\u8d25"),t(e)})).finally((function(){e.isUploading=!1}))}))}},{key:"reset",value:function(){this.serverFile=null,this.isUploading=!1}}]),e}()),w=new(function(){function e(){Object(r.a)(this,e),this.values={username:"",password:""},Object(c.k)(this)}return Object(i.a)(e,[{key:"setUsername",value:function(e){this.values.username=e}},{key:"setPassword",value:function(e){this.values.password=e}},{key:"login",value:function(){var e=this;return new Promise((function(n,t){s(e.values.username,e.values.password).then((function(e){console.log("\u767b\u5f55\u6210\u529f"),g.pullUser(),n(e)})).catch((function(e){v.b.warning("\u767b\u9646\u5931\u8d25"),g.resetUser(),t(e)}))}))}},{key:"register",value:function(){var e=this;return new Promise((function(n,t){l(e.values.username,e.values.password).then((function(e){console.log("\u6ce8\u518c\u6210\u529f"),g.pullUser(),n(e)})).catch((function(e){v.b.warning("\u6ce8\u518c\u5931\u8d25"),g.resetUser(),t(e)}))}))}},{key:"logout",value:function(){f(),g.resetUser(),b.reset(),y.reset()}}]),e}()),j=Object(a.createContext)({AuthStore:w,UserStore:g,ImageStore:y,HistoryStore:b}),x=function(){return Object(a.useContext)(j)}},98:function(e,n,t){}},[[124,3,4]]]);
//# sourceMappingURL=main.7418e62a.chunk.js.map