{"version":3,"sources":["pages/Register.js"],"names":["MyButton","styled","Button","Wrapper","div","validateUsername","rule","value","test","Promise","reject","length","resolve","confirm","getFieldValue","validator","layout","labelCol","span","wrapperCol","tailLayout","offset","Title","h1","Component","AuthStore","useStores","history","useHistory","name","onFinish","values","console","log","setUsername","username","setPassword","password","register","then","user","push","catch","err","onFinishFailed","errorInfo","Item","label","rules","required","message","min","max","Password","type","htmlType"],"mappings":"86BAMA,IAAMA,EAAWC,YAAOC,IAAPD,CAAH,KAWRE,EAAUF,IAAOG,IAAV,KAaPC,EAAmB,SAACC,EAAMC,GAC9B,MAAI,KAAKC,KAAKD,GAAeE,QAAQC,OAAO,+BACxCH,EAAMI,OAAS,EACVF,QAAQC,OACb,uDAEAH,EAAMI,OAAS,GACVF,QAAQC,OAAO,+CACjBD,QAAQG,WAIXC,EAAU,SAAC,GAAD,IAAGC,EAAH,EAAGA,cAAH,MAAwB,CACtCC,UADsC,SAC5BT,EAAMC,GACd,OAAKA,GAASO,EAAc,cAAgBP,EAGrCE,QAAQC,OAAO,oDAFbD,QAAQG,aAOfI,EAAS,CACbC,SAAU,CACRC,KAAM,GAERC,WAAY,CACVD,KAAM,KAGJE,EAAa,CACjBD,WAAY,CACVE,OAAQ,EACRH,KAAM,KAIJI,EAAQrB,IAAOsB,GAAV,KAoGIC,UA5FG,WAAO,IACfC,EAAcC,cAAdD,UACFE,EAAUC,cAoBhB,OACE,kBAACzB,EAAD,KACE,kBAACmB,EAAD,qBACA,kBAAC,IAAD,iBACMN,EADN,CAEEa,KAAK,QACLC,SAxBW,SAACC,GAChBC,QAAQC,IAAI,WAAYF,GACxBN,EAAUS,YAAYH,EAAOI,UAC7BV,EAAUW,YAAYL,EAAOM,UAC7BZ,EAAUa,WACPC,MAAK,SAACC,GACLR,QAAQC,IAAI,0DACZN,EAAQc,KAAK,QAEdC,OAAM,SAACC,GACNX,QAAQC,IAAI,wDAeZW,eAXiB,SAACC,GACtBb,QAAQC,IAAI,UAAWY,MAYnB,kBAAC,IAAKC,KAAN,CACEC,MAAM,WACNlB,KAAK,WACLmB,MAAO,CACL,CACEC,UAAU,EACVC,QAAS,+BAEX,CACEnC,UAAWV,KAIf,kBAAC,IAAD,OAGF,kBAAC,IAAKyC,KAAN,CACEC,MAAM,WACNlB,KAAK,WACLmB,MAAO,CACL,CACEC,UAAU,EACVC,QAAS,+BAEX,CACEC,IAAK,EACLD,QAAS,uDAEX,CACEE,IAAK,GACLF,QAAS,iDAIb,kBAAC,IAAMG,SAAP,OAGF,kBAAC,IAAKP,KAAN,CACEC,MAAM,kBACNlB,KAAK,kBACLmB,MAAO,CACL,CACEC,UAAU,EACVC,QAAS,gCAEXrC,IAGF,kBAAC,IAAMwC,SAAP,OAGF,kBAAC,IAAKP,KAAS1B,EACb,kBAACpB,EAAD,CAAUsD,KAAK,UAAUC,SAAS,UAAlC","file":"static/js/11.4da6d10a.chunk.js","sourcesContent":["import { useStores } from \"../stores\";\r\nimport { Form, Input, Button } from \"antd\";\r\nimport React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst MyButton = styled(Button)`\r\n  background: #288388;\r\n  border: none;\r\n  position: absolute;\r\n  right: 0;\r\n  transform: translateX(0);\r\n  @media screen and (max-width: 500px) {\r\n    right: 50%;\r\n    transform: translateX(50%);\r\n  }\r\n`;\r\nconst Wrapper = styled.div`\r\n  max-width: 600px;\r\n  margin: 30px auto;\r\n  box-shadow: 2px 2px 4px 0 rgba(0, 0, 0, 0.2);\r\n  border-radius: 4px;\r\n  padding: 20px;\r\n  background: #e9eff2;\r\n  @media (max-width: 500px){\r\n    margin-top: 80px;\r\n}\r\n`;\r\n\r\n//用户名校验\r\nconst validateUsername = (rule, value) => {\r\n  if (/\\W/.test(value)) return Promise.reject(\"invalid characters existing\");\r\n  if (value.length < 4)\r\n    return Promise.reject(\r\n      \"length of password should be 4 characters at least.\"\r\n    );\r\n  if (value.length > 10)\r\n    return Promise.reject(\"length of password should not more than 10.\");\r\n  return Promise.resolve();\r\n};\r\n\r\n//密码一致性校验\r\nconst confirm = ({ getFieldValue }) => ({\r\n  validator(rule, value) {\r\n    if (!value || getFieldValue(\"password\") === value) {\r\n      return Promise.resolve();\r\n    }\r\n    return Promise.reject(\"The two passwords that you entered do not match!\");\r\n  },\r\n});\r\n\r\n//表单布局\r\nconst layout = {\r\n  labelCol: {\r\n    span: 6,\r\n  },\r\n  wrapperCol: {\r\n    span: 18,\r\n  },\r\n};\r\nconst tailLayout = {\r\n  wrapperCol: {\r\n    offset: 0,\r\n    span: 24,\r\n  },\r\n};\r\n\r\nconst Title = styled.h1`\r\n  text-align: center;\r\n  margin-bottom: 30px;\r\n  @media (max-width: 500px) {\r\n    margin-bottom: 10px;\r\n  }\r\n`;\r\n\r\nconst Component = () => {\r\n  const { AuthStore } = useStores();\r\n  const history = useHistory();\r\n\r\n  const onFinish = (values) => {\r\n    console.log(\"Success:\", values);\r\n    AuthStore.setUsername(values.username);\r\n    AuthStore.setPassword(values.password);\r\n    AuthStore.register()\r\n      .then((user) => {\r\n        console.log(\"注册成功，进入首页\");\r\n        history.push(\"/\");\r\n      })\r\n      .catch((err) => {\r\n        console.log(\"注册失败，请重试\");\r\n      });\r\n  };\r\n\r\n  const onFinishFailed = (errorInfo) => {\r\n    console.log(\"Failed:\", errorInfo);\r\n  };\r\n\r\n  return (\r\n    <Wrapper>\r\n      <Title>注册</Title>\r\n      <Form\r\n        {...layout}\r\n        name=\"basic\"\r\n        onFinish={onFinish}\r\n        onFinishFailed={onFinishFailed}\r\n      >\r\n        <Form.Item\r\n          label=\"Username\"\r\n          name=\"username\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: \"Please input your username!\",\r\n            },\r\n            {\r\n              validator: validateUsername,\r\n            },\r\n          ]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          label=\"Password\"\r\n          name=\"password\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: \"Please input your password!\",\r\n            },\r\n            {\r\n              min: 6,\r\n              message: \"length of password should be 6 characters at least.\",\r\n            },\r\n            {\r\n              max: 20,\r\n              message: \"length of password should not more than 20.\",\r\n            },\r\n          ]}\r\n        >\r\n          <Input.Password />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          label=\"confirmPassword\"\r\n          name=\"confirmPassword\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: \"Please retype your password!\",\r\n            },\r\n            confirm,\r\n          ]}\r\n        >\r\n          <Input.Password />\r\n        </Form.Item>\r\n\r\n        <Form.Item {...tailLayout}>\r\n          <MyButton type=\"primary\" htmlType=\"submit\">\r\n            Submit\r\n          </MyButton>\r\n        </Form.Item>\r\n      </Form>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Component;\r\n"],"sourceRoot":""}