{"version":3,"sources":["components/ListItem.js","components/List.js","pages/History.js"],"names":["Flex","styled","div","FlexUrl","A","a","MyButton","Button","ButtonBox","Img","img","ListItem","observer","props","HistoryStore","useStores","src","imgsrc","target","rel","href","onClick","objId","deleteItem","Component","UserStore","loadMore","find","addPage","console","log","useEffect","currentUser","reset","initialLoad","pageStart","hasMore","isLoading","useWindow","dataSource","list","renderItem","item","Item","key","Math","random","attributes","url","id","tip","History","List"],"mappings":"u2CAMA,IAAMA,EAAOC,IAAOC,IAAV,KAaJC,EAAUF,IAAOC,IAAV,KAUPE,EAAIH,IAAOI,EAAV,KAIDC,EAAWL,YAAOM,IAAPN,CAAH,KAMRO,EAAYP,IAAOC,IAAV,KAUTO,EAAMR,IAAOS,IAAV,KA8BMC,EAtBEC,aAAS,SAACC,GAAW,IAC5BC,EAAiBC,cAAjBD,aAIR,OACE,kBAACd,EAAD,KACE,6BACE,kBAACS,EAAD,CAAKO,IAAKH,EAAMI,UAElB,kBAACd,EAAD,KACE,kBAACC,EAAD,CAAGc,OAAO,SAASC,IAAI,aAAaC,KAAMP,EAAMO,MAC7CP,EAAMO,OAGX,kBAACZ,EAAD,KACE,kBAACF,EAAD,CAAUe,QAAS,kBAdLC,EAcsBT,EAAMS,WAb9CR,EAAaS,WAAWD,GADP,IAACA,IAcd,qBCbOE,EArDGZ,aAAS,WAAO,IAAD,EACKG,cAA5BD,EADuB,EACvBA,aAAcW,EADS,EACTA,UAChBC,EAAW,WACfZ,EAAaa,OACbb,EAAac,UACbC,QAAQC,IAAI,aAgBd,OAbAC,qBAAU,WAOR,OALAF,QAAQC,IAAIL,EAAUO,aACjBP,EAAUO,YAERN,IADLZ,EAAamB,QAGR,WACLJ,QAAQC,IAAI,gBACZhB,EAAamB,WAEd,IAGD,6BACE,kBAAC,IAAD,CACEC,aAAa,EACbC,UAAW,EACXT,SAAUA,EACVU,SAAUtB,EAAauB,WAAavB,EAAasB,QACjDE,WAAW,GAEX,kBAAC,IAAD,CACEC,WAAYzB,EAAa0B,KACzBC,WAAY,SAACC,GAAD,OACV,kBAAC,IAAKC,KAAN,CAAWC,IAAKC,KAAKC,UACnB,kBAAC,EAAD,CACE7B,OAAQyB,EAAKK,WAAWC,IAAID,WAAWC,IACvC5B,KAAMsB,EAAKK,WAAWC,IAAID,WAAWC,IACrC1B,MAAOoB,EAAKO,QAKjBnC,EAAauB,WAAavB,EAAasB,SACtC,6BACE,kBAAC,IAAD,CAAMc,IAAI,8BCxCTC,UATf,WACI,OACI,oCACI,0CACA,kBAACC,EAAD","file":"static/js/8.4be1544b.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport { useStores } from \"../stores\";\r\nimport { Button } from \"antd\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Flex = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  width: 100%;\r\n  align-items: center;\r\n  border-bottom: 1px solid #000;\r\n  padding-bottom: 25px;\r\n  @media (max-width: 500px) {\r\n    flex-direction: column;\r\n  }\r\n`;\r\n\r\nconst FlexUrl = styled.div`\r\n  height: 120px;\r\n  @media (max-width: 500px) {\r\n    height: 60px;\r\n    margin-top: 12px;\r\n  }\r\n  @media (min-width: 500px) {\r\n    line-height: 120px;\r\n  }\r\n`;\r\nconst A = styled.a`\r\n  border-bottom: 1px solid;\r\n`;\r\n\r\nconst MyButton = styled(Button)`\r\n  background: #288388;\r\n  border: none;\r\n  color: #fff;\r\n`;\r\n\r\nconst ButtonBox = styled.div`\r\n  height: 100px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  @media (max-width: 500px) {\r\n    height: 50px;\r\n  }\r\n`;\r\n\r\nconst Img = styled.img`\r\n  width: 100px;\r\n  height: 100px;\r\n  object-fit: contain;\r\n  border: 1px solid #eee;\r\n  margin-left: 10px;\r\n`;\r\n\r\nconst ListItem = observer((props) => {\r\n  const { HistoryStore } = useStores();\r\n  const deleteItem = (objId) => {\r\n    HistoryStore.deleteItem(objId);\r\n  };\r\n  return (\r\n    <Flex>\r\n      <div>\r\n        <Img src={props.imgsrc} />\r\n      </div>\r\n      <FlexUrl>\r\n        <A target=\"_blank\" rel=\"noreferrer\" href={props.href}>\r\n          {props.href}\r\n        </A>\r\n      </FlexUrl>\r\n      <ButtonBox>\r\n        <MyButton onClick={() => deleteItem(props.objId)}>删除</MyButton>\r\n      </ButtonBox>\r\n    </Flex>\r\n  );\r\n});\r\n\r\nexport default ListItem;\r\n","import React, { useEffect } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport { useStores } from \"../stores\";\r\nimport InfiniteScroll from \"react-infinite-scroller\";\r\nimport { List, Spin } from \"antd\";\r\nimport ListItem from \"./ListItem\";\r\n\r\nconst Component = observer(() => {\r\n  const { HistoryStore, UserStore } = useStores();\r\n  const loadMore = () => {\r\n    HistoryStore.find();\r\n    HistoryStore.addPage();\r\n    console.log(\"loadmore\");\r\n  };\r\n\r\n  useEffect(() => {\r\n    // eslint-disable-next-line\r\n    console.log(UserStore.currentUser);\r\n    if (!UserStore.currentUser) {\r\n      HistoryStore.reset();\r\n    } else loadMore();\r\n\r\n    return () => {\r\n      console.log(\"卸载\");\r\n      HistoryStore.reset();\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <InfiniteScroll\r\n        initialLoad={false}\r\n        pageStart={0}\r\n        loadMore={loadMore}\r\n        hasMore={!HistoryStore.isLoading && HistoryStore.hasMore}\r\n        useWindow={true}\r\n      >\r\n        <List\r\n          dataSource={HistoryStore.list}\r\n          renderItem={(item) => (\r\n            <List.Item key={Math.random()}>\r\n              <ListItem\r\n                imgsrc={item.attributes.url.attributes.url}\r\n                href={item.attributes.url.attributes.url}\r\n                objId={item.id}\r\n              />\r\n            </List.Item>\r\n          )}\r\n        >\r\n          {HistoryStore.isLoading && HistoryStore.hasMore && (\r\n            <div>\r\n              <Spin tip=\"加载中\" />\r\n            </div>\r\n          )}\r\n        </List>\r\n      </InfiniteScroll>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default Component;\r\n","import React from 'react'\r\nimport List from '../components/List'\r\nfunction History() {\r\n    return (\r\n        <>\r\n            <h1>Repository</h1>\r\n            <List />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default History"],"sourceRoot":""}